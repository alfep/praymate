<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>PrayMate - Pengingat Sholat & Al-Qur'an</title>

  <!-- CSS pakai path relatif -->
  <link rel="stylesheet" href="./css/style.css">

  <!-- Manifest juga relatif -->
  <link rel="manifest" href="./manifest.webmanifest">

  <script>
    // Apply theme IMMEDIATELY before render (no blink)
    (function() {
      try {
        const theme = localStorage.getItem('praymate_theme');
        if (theme === 'dark') {
          document.documentElement.classList.add('theme-dark');
        }
      } catch (e) {
        console.warn('Theme localStorage error:', e);
      }
    })();
  </script>
</head>
<body>
  <header>
    <button class="theme-toggle" id="theme-toggle" title="Toggle Dark/Light Mode" aria-label="Toggle tema gelap/terang">
      <span id="theme-icon">ğŸŒ™</span>
    </button>
    <h1>PrayMate</h1>
    <p>Teman ibadah harianmu ğŸ¤²</p>
  </header>

  <main>
    <nav class="menu-grid" role="navigation" aria-label="Menu utama PrayMate">
      <a href="./jadwal.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ“…</span>
        <span>Jadwal Sholat</span>
      </a>
      <a href="./quran.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ“–</span>
        <span>Al-Qur'an Digital</span>
      </a>
      <a href="./doa.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ¤²</span>
        <span>Doa Harian</span>
      </a>
      <a href="./hadits.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ“š</span>
        <span>Hadits Shahih</span>
      </a>
      <a href="./asmaul-husna.html" class="menu-card">
        <span style="font-size: 32px;">âœ¨</span>
        <span>Asmaul Husna</span>
      </a>
      <a href="./dzikir.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ“¿</span>
        <span>Dzikir Counter</span>
      </a>
      <a href="./kiblat.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ§­</span>
        <span>Kiblat Compass</span>
      </a>
      <a href="./zakat.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ’°</span>
        <span>Zakat Calculator</span>
      </a>
      <a href="./kalender.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ“†</span>
        <span>Kalender Hijriah</span>
      </a>
      <a href="./panduan-sholat.html" class="menu-card">
        <span style="font-size: 32px;">ğŸ•Œ</span>
        <span>Panduan Sholat</span>
      </a>
      <a href="./settings.html" class="menu-card">
        <span style="font-size: 32px;">âš™ï¸</span>
        <span>Pengaturan</span>
      </a>
    </nav>
  </main>

  <footer>
    Â© PrayMate 2025 â€” Bantu ibadahmu setiap hari ğŸ¤²
  </footer>

  <!-- JS pakai path relatif, tanpa ?v -->
  <script src="./js/theme.js"></script>
  <script src="./js/app.js"></script>
  <script src="./js/islamic-features.js"></script>

  <script>
  (function() {
    const isDev =
      location.hostname === "localhost" ||
      location.hostname === "127.0.0.1";

    if (isDev) {
      console.log("ğŸ”§ DEV MODE â†’ Service Worker disabled + cache bypass");

      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.getRegistrations()
          .then(regs => regs.forEach(reg => reg.unregister()));
      }

      if ("caches" in window) {
        caches.keys().then(keys =>
          keys.forEach(k => caches.delete(k))
        );
      }
    } else {
      console.log("ğŸš€ PRODUCTION MODE â†’ Service Worker enabled");
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("./service-worker.js")
          .then(() => console.log("âœ… SW registered"))
          .catch(err => console.log("âŒ SW error:", err));
      }
    }
  })();
  </script>
</body>
</html>
